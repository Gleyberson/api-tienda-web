<div class="row g-4">
  <div class="col-12 col-lg-4">
    <div class="card shadow-sm">
      <div class="card-body">
        <h2 class="h5 mb-3">Crear producto (WebSocket)</h2>
        <form id="createForm" novalidate>
          <div class="mb-3">
            <label class="form-label">Título</label>
            <input name="title" class="form-control" required />
          </div>
          <div class="mb-3">
            <label class="form-label">Descripción</label>
            <textarea name="description" class="form-control" rows="2"></textarea>
          </div>
          <div class="row">
            <div class="col-6 mb-3">
              <label class="form-label">Precio</label>
              <input name="price" type="number" step="0.01" min="0" class="form-control" />
            </div>
            <div class="col-6 mb-3">
              <label class="form-label">Stock</label>
              <input name="stock" type="number" min="0" class="form-control" />
            </div>
          </div>
          <div class="row">
            <div class="col-6 mb-3">
              <label class="form-label">Código</label>
              <input name="code" class="form-control" />
            </div>
            <div class="col-6 mb-3">
              <label class="form-label">Categoría</label>
              <input name="category" class="form-control" />
            </div>
          </div>

          <div class="mb-3">
            <label class="form-label">Imágenes (thumbnails)</label>
            <input name="thumbnails" type="file" class="form-control" accept="image/*" multiple />
            <div class="form-text">Hasta 10 archivos. Tamaño máximo por archivo: 5 MB. Se guardarán en /public/img y su ruta se agregará al JSON.</div>
          </div>

          <div class="mb-3">
            <label class="form-label">Estado</label>
            <select name="status" class="form-select">
              <option value="">(sin definir)</option>
              <option value="true">Activo</option>
              <option value="false">Inactivo</option>
            </select>
          </div>

          <button class="btn btn-primary w-100" type="submit">Crear</button>
          <div id="createMsg" class="mt-3 small"></div>
        </form>
      </div>
    </div>
  </div>

  <div class="col-12 col-lg-8">
    <h1 class="h4 mb-3">Productos (tiempo real)</h1>
    <div id="productList" class="row g-4">
      {{#each products}}
        <div class="col-12 col-md-6">
          <div class="card h-100 shadow-sm" data-id="{{this.id}}">
            {{#if this.thumbnails}}
              <img src="{{this.thumbnails.[0]}}" class="card-img-top" style="aspect-ratio: 16/9; object-fit: cover;" alt="Producto">
            {{else}}
              <img src="https://via.placeholder.com/800x450?text=Sin+imagen" class="card-img-top" style="aspect-ratio: 16/9; object-fit: cover;" alt="Producto">
            {{/if}}
            <div class="card-body">
              <h5 class="card-title mb-1">{{this.title}}</h5>
              <p class="text-muted small mb-2">ID: {{this.id}} • Código: {{this.code}}</p>
              <p class="card-text">{{this.description}}</p>
            </div>
            <div class="card-footer bg-white d-flex justify-content-between align-items-center">
              <strong class="text-primary">${{this.price}}</strong>
              <button class="btn btn-outline-danger btn-sm btn-delete" data-id="{{this.id}}">Eliminar</button>
            </div>
          </div>
        </div>
      {{/each}}
    </div>
  </div>
</div>

<script src="/js/realtime.js" defer></script>